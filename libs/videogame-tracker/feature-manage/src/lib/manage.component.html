<ng-container>
  <h1>Add new game</h1>
</ng-container>

<mat-stepper
  class="example-stepper"
  linear
  [orientation]="(stepperOrientation | async)!"
>
  <mat-step [stepControl]="gameTitleForm" label="Title">
    <form [formGroup]="gameTitleForm">
      <mat-form-field appearance="fill">
        <mat-label>Title</mat-label>
        <input
          matInput
          placeholder="Ex: Lemmings"
          formControlName="title"
          required
        />
        <mat-error
          *ngIf="gameTitleForm.controls['title'].hasError('required')"
          >{{ 'Title is required' }}</mat-error
        >
        <mat-error
          *ngIf="gameTitleForm.controls['title'].hasError('maxlength')"
          >{{ 'Max length is 50 characters' }}</mat-error
        >
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameYearForm" label="Year">
    <form [formGroup]="gameYearForm">
      <mat-form-field appearance="fill">
        <mat-label>Year</mat-label>
        <input
          matInput
          formControlName="year"
          placeholder="Ex. 2020"
          mask="0000"
          required
        />
        <mat-error *ngIf="gameYearForm.controls['year'].hasError('required')">{{
          'Year is required'
        }}</mat-error>
        <mat-error *ngIf="gameYearForm.controls['year'].hasError('min')">{{
          'Min year value is 1950'
        }}</mat-error>
        <mat-error *ngIf="gameYearForm.controls['year'].hasError('max')">{{
          'Max year value is ' + maxYear
        }}</mat-error>
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button (click)="setMinDateRange()" matStepperNext>
          Next
        </button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameConsoleForm" label="Console">
    <form [formGroup]="gameConsoleForm">
      <mat-form-field appearance="fill">
        <mat-label>Console</mat-label>
        <mat-select required formControlName="console">
          <mat-option
            *ngFor="let console of consoleList$ | async"
            [value]="console?.name"
          >
            {{ console.name }}
          </mat-option>
        </mat-select>
        <mat-error
          *ngIf="gameConsoleForm.controls['console'].hasError('required')"
          >{{ 'Please choose a console' }}</mat-error
        >
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameCompletedForm" label="Completed">
    <form [formGroup]="gameCompletedForm">
      <mat-label>Completed</mat-label>
      <mat-radio-group formControlName="completed" required>
        <mat-radio-button [value]="true"> Yes </mat-radio-button>
        <mat-radio-button [value]="false"> No </mat-radio-button>
      </mat-radio-group>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameDateOfCompletionForm" label="Date of completion">
    <form [formGroup]="gameDateOfCompletionForm">
      <mat-form-field appearance="fill">
        <mat-label>Date of completion</mat-label>
        <input
          matInput
          [min]="minDate"
          [max]="currentDate"
          placeholder="Ex. 11/18/2020"
          required
          formControlName="dateOfCompletion"
          [matDatepicker]="picker"
        />
        <mat-hint>MM/DD/YYYY</mat-hint>
        <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gamePersonalNotesForm" label="Personal notes">
    <form [formGroup]="gamePersonalNotesForm" class="notes-form">
      <mat-form-field class="full-width" appearance="fill">
        <mat-label>Personal notes</mat-label>
        <textarea
          matInput
          formControlName="personalNotes"
          placeholder="Ex. This game is awesome"
          required
        ></textarea>
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <p>You are now done.</p>
    <div>
      <button mat-button (click)="addNewGame()">Submit</button>
    </div>
  </mat-step>
</mat-stepper>

<!--  -->
<!-- <mat-stepper #stepper>
  <mat-step [stepControl]="gameTitleForm" errorMessage="Name is required.">
    <form [formGroup]="gameTitleForm">
      <ng-template matStepLabel>Fill out your name</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input
          matInput
          placeholder="Last name, First name"
          formControlName="title"
          required
        />
      </mat-form-field>
      <div>
        <p>Go to a different step to see the error state</p>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameTitleForm" errorMessage="Address is required.">
    <form [formGroup]="gameTitleForm">
      <ng-template matStepLabel>Fill out your address</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Address</mat-label>
        <input
          matInput
          placeholder="Ex. 1 Main St, New York, NY"
          formControlName="title"
          required
        />
      </mat-form-field>
      <div>
        <p>Go to a different step to see the error state</p>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <p>You are now done.</p>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button (click)="stepper.reset()">Reset</button>
    </div>
  </mat-step>
</mat-stepper> -->

<!-- <mat-stepper linear #stepper>
  <mat-step [stepControl]="gameTitleForm">
    <form [formGroup]="gameTitleForm">
      <ng-template matStepLabel>Fill out your name</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Name</mat-label>
        <input
          matInput
          formControlName="title"
          placeholder="Last name, First name"
          required
        />
      </mat-form-field>
      <div>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step [stepControl]="gameTitleForm">
    <form [formGroup]="gameTitleForm">
      <ng-template matStepLabel>Fill out your address</ng-template>
      <mat-form-field appearance="fill">
        <mat-label>Address</mat-label>
        <input
          matInput
          formControlName="title"
          placeholder="Ex. 1 Main St, New York, NY"
          required
        />
      </mat-form-field>
      <div>
        <button mat-button matStepperPrevious>Back</button>
        <button mat-button matStepperNext>Next</button>
      </div>
    </form>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Done</ng-template>
    <p>You are now done.</p>
    <div>
      <button mat-button matStepperPrevious>Back</button>
      <button mat-button (click)="stepper.reset()">Reset</button>
    </div>
  </mat-step>
</mat-stepper> -->
